<!-- index.html -->
<html>
    <head>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <body>
        <h1>着席チェッカー</h1>
        {% for i in chair_list %}
         <p id="text-field{{ loop.index }}"></p>
        <img id="img{{ loop.index }}" src="">
        {% endfor %}
{#        <p id="text-field1"></p>#}
{#        <img id="img1" src=""/>#}
{#        <p id="text-field2"></p>#}
{#    <img id="img2" src=""/>#}
    <a href="/add">登録画面へ</a>
    </body>
        <script type="text/javascript">
            var ws = new WebSocket("ws://192.168.11.152:9999/pipe");
            var c_list = {{ chair_list }}
            ws.onopen = function() {
                {#out.html("Connection opened.")#}
            };
            {#ws.onmessage = function (e) {#}
            {#    document.getElementById("text-field1").innerHTML = e.data#}
            {#}#}
            ws.onmessage = function(e) {
                var list = e.data.toString()
                var k =(/\[|,| |\]/g);
                var list_f = list.split(k)
                {#console.log(c_list);#}

                for (var l in c_list ) {
                    console.log(Number(l)+1)
                    var id = (Number(l)+1)
                    if (list_f.indexOf(String(c_list[l+1])) >= 0) {
                        document.getElementById("text-field" + id).innerHTML = "椅子 " + id + ": 未使用";
                        var el = document.getElementById("img" + id);
                        el.src = "data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMzIDMzIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMyAzMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI2NHB4IiBoZWlnaHQ9IjY0cHgiPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik0yNC4xOTIsMjQuNTA1SDguODA5Yy0wLjI3NiwwLTAuNS0wLjIyNC0wLjUtMC41di04LjEyMmMwLTIuMjctMS44NDctNC4xMTUtNC4xMTYtNC4xMTVDMi40MzIsMTEuNzY4LDEsMTMuMTk5LDEsMTQuOTYgICAgYzAsMS4zNTQsMS4xMDEsMi40NTQsMi40NTQsMi40NTRjMS4wMjcsMCwxLjg2My0wLjgzNiwxLjg2My0xLjg2M2MwLTAuNzY3LTAuNjI0LTEuMzkxLTEuMzkxLTEuMzkxYy0wLjI3NiwwLTAuNS0wLjIyNC0wLjUtMC41ICAgIHMwLjIyNC0wLjUsMC41LTAuNWMxLjMxOCwwLDIuMzkxLDEuMDcyLDIuMzkxLDIuMzkxYzAsMS41NzktMS4yODQsMi44NjMtMi44NjMsMi44NjNDMS41NSwxOC40MTQsMCwxNi44NjQsMCwxNC45NiAgICBjMC0yLjMxMiwxLjg4MS00LjE5Miw0LjE5Mi00LjE5MmMyLjgyMSwwLDUuMTE2LDIuMjk1LDUuMTE2LDUuMTE1djcuNjIyaDE0LjM4NHYtNy42MjJjMC0yLjgyLDIuMjk1LTUuMTE1LDUuMTE1LTUuMTE1ICAgIGMyLjMxMiwwLDQuMTkyLDEuODgxLDQuMTkyLDQuMTkyYzAsMS45MDQtMS41NSwzLjQ1NC0zLjQ1NCwzLjQ1NGMtMS41NzgsMC0yLjg2Mi0xLjI4NC0yLjg2Mi0yLjg2MyAgICBjMC0xLjMxOCwxLjA3Mi0yLjM5MSwyLjM5LTIuMzkxYzAuMjc2LDAsMC41LDAuMjI0LDAuNSwwLjVzLTAuMjI0LDAuNS0wLjUsMC41Yy0wLjc2NywwLTEuMzksMC42MjQtMS4zOSwxLjM5MSAgICBjMCwxLjAyNywwLjgzNSwxLjg2MywxLjg2MiwxLjg2M2MxLjM1NCwwLDIuNDU0LTEuMTAxLDIuNDU0LTIuNDU0YzAtMS43NjEtMS40MzItMy4xOTItMy4xOTItMy4xOTIgICAgYy0yLjI3LDAtNC4xMTUsMS44NDYtNC4xMTUsNC4xMTV2OC4xMjJDMjQuNjkyLDI0LjI4MSwyNC40NjksMjQuNTA1LDI0LjE5MiwyNC41MDV6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8L2c+Cgk8cGF0aCBkPSJNMjguMDkxLDI5LjMwNEg1LjAxOGMtMS4xMzgsMC0yLjA2My0wLjkyNi0yLjA2My0yLjA2M3YtOS4zMjZjMC0wLjI3NiwwLjIyNC0wLjUsMC41LTAuNXMwLjUsMC4yMjQsMC41LDAuNXY5LjMyNiAgIGMwLDAuNTg2LDAuNDc4LDEuMDYzLDEuMDYzLDEuMDYzaDIzLjA3M2MwLjU4NiwwLDEuMDYzLTAuNDc4LDEuMDYzLTEuMDYzdi05LjMyNmMwLTAuMjc2LDAuMjI0LTAuNSwwLjUtMC41czAuNSwwLjIyNCwwLjUsMC41ICAgdjkuMzI2QzMwLjE1NCwyOC4zNzgsMjkuMjI5LDI5LjMwNCwyOC4wOTEsMjkuMzA0eiIgZmlsbD0iIzAwMDAwMCIvPgoJPHBhdGggZD0iTTI0LjE5MiwyMC4yNzFIOC44MDljLTAuMjc2LDAtMC41LTAuMjI0LTAuNS0wLjVzMC4yMjQtMC41LDAuNS0wLjVoMTUuMzg0YzAuMjc2LDAsMC41LDAuMjI0LDAuNSwwLjUgICBTMjQuNDY5LDIwLjI3MSwyNC4xOTIsMjAuMjcxeiIgZmlsbD0iIzAwMDAwMCIvPgoJPHBhdGggZD0iTTguODA5LDMwLjkyN2MtMC4yNzYsMC0wLjUtMC4yMjQtMC41LTAuNVYyOS4yYzAtMC4yNzYsMC4yMjQtMC41LDAuNS0wLjVzMC41LDAuMjI0LDAuNSwwLjV2MS4yMjcgICBDOS4zMDksMzAuNzAzLDkuMDg1LDMwLjkyNyw4LjgwOSwzMC45Mjd6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8cGF0aCBkPSJNMjQuMTkyLDMwLjkyN2MtMC4yNzYsMC0wLjUtMC4yMjQtMC41LTAuNVYyOS4yYzAtMC4yNzYsMC4yMjQtMC41LDAuNS0wLjVzMC41LDAuMjI0LDAuNSwwLjV2MS4yMjcgICBDMjQuNjkyLDMwLjcwMywyNC40NjksMzAuOTI3LDI0LjE5MiwzMC45Mjd6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8cGF0aCBkPSJNMjcuNTYzLDExLjc2OGMtMC4yNzYsMC0wLjUtMC4yMjQtMC41LTAuNVY4LjAwOWMwLTIuNzIyLTIuMjE0LTQuOTM2LTQuOTM2LTQuOTM2SDEwLjk4Yy0yLjcyMiwwLTQuOTM2LDIuMjE0LTQuOTM2LDQuOTM2ICAgdjMuMjU5YzAsMC4yNzYtMC4yMjQsMC41LTAuNSwwLjVzLTAuNS0wLjIyNC0wLjUtMC41VjguMDA5YzAtMy4yNzIsMi42NjMtNS45MzYsNS45MzYtNS45MzZoMTEuMTQ3ICAgYzMuMjcyLDAsNS45MzYsMi42NjMsNS45MzYsNS45MzZ2My4yNTlDMjguMDYzLDExLjU0NCwyNy44NCwxMS43NjgsMjcuNTYzLDExLjc2OHoiIGZpbGw9IiMwMDAwMDAiLz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K";
                    } else {
                        document.getElementById("text-field" + id).innerHTML = "椅子 " + id + ": 使用中";
                        var el = document.getElementById("img" + id);
                        el.src = "data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMzIDMzIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMyAzMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI2NHB4IiBoZWlnaHQ9IjY0cHgiPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik0yNC4xOTIsMjQuNTA1SDguODA5Yy0wLjI3NiwwLTAuNS0wLjIyNC0wLjUtMC41di04LjEyMmMwLTIuMjctMS44NDctNC4xMTUtNC4xMTYtNC4xMTVDMi40MzIsMTEuNzY4LDEsMTMuMTk5LDEsMTQuOTYgICAgYzAsMS4zNTQsMS4xMDEsMi40NTQsMi40NTQsMi40NTRjMS4wMjcsMCwxLjg2My0wLjgzNiwxLjg2My0xLjg2M2MwLTAuNzY3LTAuNjI0LTEuMzkxLTEuMzkxLTEuMzkxYy0wLjI3NiwwLTAuNS0wLjIyNC0wLjUtMC41ICAgIHMwLjIyNC0wLjUsMC41LTAuNWMxLjMxOCwwLDIuMzkxLDEuMDcyLDIuMzkxLDIuMzkxYzAsMS41NzktMS4yODQsMi44NjMtMi44NjMsMi44NjNDMS41NSwxOC40MTQsMCwxNi44NjQsMCwxNC45NiAgICBjMC0yLjMxMiwxLjg4MS00LjE5Miw0LjE5Mi00LjE5MmMyLjgyMSwwLDUuMTE2LDIuMjk1LDUuMTE2LDUuMTE1djcuNjIyaDE0LjM4NHYtNy42MjJjMC0yLjgyLDIuMjk1LTUuMTE1LDUuMTE1LTUuMTE1ICAgIGMyLjMxMiwwLDQuMTkyLDEuODgxLDQuMTkyLDQuMTkyYzAsMS45MDQtMS41NSwzLjQ1NC0zLjQ1NCwzLjQ1NGMtMS41NzgsMC0yLjg2Mi0xLjI4NC0yLjg2Mi0yLjg2MyAgICBjMC0xLjMxOCwxLjA3Mi0yLjM5MSwyLjM5LTIuMzkxYzAuMjc2LDAsMC41LDAuMjI0LDAuNSwwLjVzLTAuMjI0LDAuNS0wLjUsMC41Yy0wLjc2NywwLTEuMzksMC42MjQtMS4zOSwxLjM5MSAgICBjMCwxLjAyNywwLjgzNSwxLjg2MywxLjg2MiwxLjg2M2MxLjM1NCwwLDIuNDU0LTEuMTAxLDIuNDU0LTIuNDU0YzAtMS43NjEtMS40MzItMy4xOTItMy4xOTItMy4xOTIgICAgYy0yLjI3LDAtNC4xMTUsMS44NDYtNC4xMTUsNC4xMTV2OC4xMjJDMjQuNjkyLDI0LjI4MSwyNC40NjksMjQuNTA1LDI0LjE5MiwyNC41MDV6IiBmaWxsPSIjZGVkOWRlIi8+Cgk8L2c+Cgk8cGF0aCBkPSJNMjguMDkxLDI5LjMwNEg1LjAxOGMtMS4xMzgsMC0yLjA2My0wLjkyNi0yLjA2My0yLjA2M3YtOS4zMjZjMC0wLjI3NiwwLjIyNC0wLjUsMC41LTAuNXMwLjUsMC4yMjQsMC41LDAuNXY5LjMyNiAgIGMwLDAuNTg2LDAuNDc4LDEuMDYzLDEuMDYzLDEuMDYzaDIzLjA3M2MwLjU4NiwwLDEuMDYzLTAuNDc4LDEuMDYzLTEuMDYzdi05LjMyNmMwLTAuMjc2LDAuMjI0LTAuNSwwLjUtMC41czAuNSwwLjIyNCwwLjUsMC41ICAgdjkuMzI2QzMwLjE1NCwyOC4zNzgsMjkuMjI5LDI5LjMwNCwyOC4wOTEsMjkuMzA0eiIgZmlsbD0iI2RlZDlkZSIvPgoJPHBhdGggZD0iTTI0LjE5MiwyMC4yNzFIOC44MDljLTAuMjc2LDAtMC41LTAuMjI0LTAuNS0wLjVzMC4yMjQtMC41LDAuNS0wLjVoMTUuMzg0YzAuMjc2LDAsMC41LDAuMjI0LDAuNSwwLjUgICBTMjQuNDY5LDIwLjI3MSwyNC4xOTIsMjAuMjcxeiIgZmlsbD0iI2RlZDlkZSIvPgoJPHBhdGggZD0iTTguODA5LDMwLjkyN2MtMC4yNzYsMC0wLjUtMC4yMjQtMC41LTAuNVYyOS4yYzAtMC4yNzYsMC4yMjQtMC41LDAuNS0wLjVzMC41LDAuMjI0LDAuNSwwLjV2MS4yMjcgICBDOS4zMDksMzAuNzAzLDkuMDg1LDMwLjkyNyw4LjgwOSwzMC45Mjd6IiBmaWxsPSIjZGVkOWRlIi8+Cgk8cGF0aCBkPSJNMjQuMTkyLDMwLjkyN2MtMC4yNzYsMC0wLjUtMC4yMjQtMC41LTAuNVYyOS4yYzAtMC4yNzYsMC4yMjQtMC41LDAuNS0wLjVzMC41LDAuMjI0LDAuNSwwLjV2MS4yMjcgICBDMjQuNjkyLDMwLjcwMywyNC40NjksMzAuOTI3LDI0LjE5MiwzMC45Mjd6IiBmaWxsPSIjZGVkOWRlIi8+Cgk8cGF0aCBkPSJNMjcuNTYzLDExLjc2OGMtMC4yNzYsMC0wLjUtMC4yMjQtMC41LTAuNVY4LjAwOWMwLTIuNzIyLTIuMjE0LTQuOTM2LTQuOTM2LTQuOTM2SDEwLjk4Yy0yLjcyMiwwLTQuOTM2LDIuMjE0LTQuOTM2LDQuOTM2ICAgdjMuMjU5YzAsMC4yNzYtMC4yMjQsMC41LTAuNSwwLjVzLTAuNS0wLjIyNC0wLjUtMC41VjguMDA5YzAtMy4yNzIsMi42NjMtNS45MzYsNS45MzYtNS45MzZoMTEuMTQ3ICAgYzMuMjcyLDAsNS45MzYsMi42NjMsNS45MzYsNS45MzZ2My4yNTlDMjguMDYzLDExLjU0NCwyNy44NCwxMS43NjgsMjcuNTYzLDExLjc2OHoiIGZpbGw9IiNkZWQ5ZGUiLz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K";
                    }
                }

            }
        </script>
</html>